# ===================================================================
# Intelligent Proxy Service V3.0 Configuration
# ===================================================================

[server]
port = 6942
# Comma-separated list of IPs allowed to access the dashboard and dashboard APIs.
# If empty or commented out, all IPs are allowed.
allowed_dashboard_ips = 127.0.0.1, 192.168.1.100

[database]
host = localhost
port = 5432
dbname = proxy_db
user = proxy_user
password = hell02025
max_connections = 50

[validator]
# Target website for validating proxy liveness and anonymity.
validation_target = http://httpbin.org/ip
# Validation request timeout in seconds.
validation_timeout_s = 10
# Number of concurrent threads for the validation task.
validation_workers = 100
# supplement with recent failed proxies.
validation_supplement_threshold = 2000

validation_window_minutes = 30
max_validations_per_window = 5

[scheduler]
# The fixed interval in seconds at which the validation task is triggered.
validation_interval_seconds = 120

stats_flush_interval_seconds = 60

source_refresh_interval_seconds = 300


[sources]
# [NEW] A comma-separated list of all predefined, valid source names.
predefined_sources = default, insolvencydirect
# [NEW] If a request uses a source not in the list above, it will be mapped to this one.
default_source = default


[source_pool]
# [NEW] The maximum number of proxies to keep in the in-memory pool for each source.
max_pool_size = 200
# The Nth penalty is used for N consecutive failures.
# The last penalty is used for all subsequent failures.
failure_penalties = -1, -5, -20

stats_pool_max_multiplier = 20

# Enable or disable the tiered proxy selection feature.
weighted_selection_enabled = false
# The number of proxies to place in the high-performance (top) tier.
top_tier_size = 100
# The percentage of requests (0-100) that should be handled by the top tier.
top_tier_load_percentage = 50

# 高质量代理池大小，默认20
premium_pool_size = 20
# 最小使用次数要求，默认50
premium_min_usage_count = 50

# ELO 滑动窗口配置
# 每个代理保留的最大结果数
elo_max_window = 100
# 用于计算分数的结果数
elo_scoring_window = 50
# 是否启用按时间衰减（越旧数据权重越低）
elo_time_decay_enabled = true
# 时间衰减半衰期（小时）
elo_decay_half_life_hours = 24
# 参与评分的最大结果年龄（小时）
elo_max_result_age_hours = 168


[backup]
stats_backup_enabled = true
stats_backup_interval_seconds = 3600
stats_backup_path = ./.shared/data/proxy_stats_backup.json


# ===================================================================
# Dynamic Proxy Source Definitions
# ===================================================================
# You can add any number of proxy sources. Follow the [proxy_source_NAME] format.
# Each source will be fetched automatically based on its independent update interval.

[proxy_source_http_list_A]
# The URL of the proxy list.
url = https://raw.githubusercontent.com/tuanminpay/live-proxy/master/http.txt
# The update interval for this specific source in minutes.
update_interval_minutes = 10
# (Optional) If the file contains ip:port format, this protocol will be prepended.
default_protocol = http

[proxy_source_socks5_list_B]
url = https://raw.githubusercontent.com/tuanminpay/live-proxy/master/socks5.txt
update_interval_minutes = 10
default_protocol = socks5

[proxy_source_http_list_C]
url = https://raw.githubusercontent.com/handeveloper1/Proxy/refs/heads/main/Proxies-Ercin/http.txt
update_interval_minutes = 10
default_protocol = http

[proxy_source_socks5_list_D]
url = https://raw.githubusercontent.com/databay-labs/free-proxy-list/refs/heads/master/socks5.txt
update_interval_minutes = 3
default_protocol = socks5


[proxy_source_http_list_E]
url = https://raw.githubusercontent.com/databay-labs/free-proxy-list/refs/heads/master/http.txt
update_interval_minutes = 3
default_protocol = http

[proxy_source_https_list_F]
url = https://raw.githubusercontent.com/databay-labs/free-proxy-list/refs/heads/master/https.txt
update_interval_minutes = 3
default_protocol = http

[proxy_source_http_list_G]
url = https://raw.githubusercontent.com/claude89757/free_https_proxies/refs/heads/main/https_proxies.txt
update_interval_minutes = 3
default_protocol = http

[proxy_source_http_list_H]
url = https://raw.githubusercontent.com/dpangestuw/Free-Proxy/refs/heads/main/http_proxies.txt
update_interval_minutes = 5
default_protocol = http

[proxy_source_socks5_list_I]
url = https://raw.githubusercontent.com/dpangestuw/Free-Proxy/refs/heads/main/socks5_proxies.txt
update_interval_minutes = 5
default_protocol = socks5

[proxy_source_http_list_J]
url = https://raw.githubusercontent.com/proxifly/free-proxy-list/refs/heads/main/proxies/protocols/http/data.txt
update_interval_minutes = 10
default_protocol = http


[proxy_source_http_list_K]
url = https://raw.githubusercontent.com/casa-ls/proxy-list/refs/heads/main/http
update_interval_minutes = 10
default_protocol = http

[proxy_source_http_list_L]
url = https://raw.githubusercontent.com/casa-ls/proxy-list/refs/heads/main/socks5
update_interval_minutes = 10
default_protocol = socks5


[proxy_source_http_list_M]
url = https://raw.githubusercontent.com/r00tee/Proxy-List/refs/heads/main/Https.txt
update_interval_minutes = 3
default_protocol = http


[proxy_source_http_list_N]
url = https://raw.githubusercontent.com/r00tee/Proxy-List/refs/heads/main/Socks5.txt
update_interval_minutes = 3
default_protocol = socks5

[proxy_source_http_list_O]
url = https://raw.githubusercontent.com/hw630590/free-proxy-list/refs/heads/main/proxies/http/http.txt
update_interval_minutes = 10
default_protocol = http


[proxy_source_http_list_P]
url = https://raw.githubusercontent.com/hw630590/free-proxy-list/refs/heads/main/proxies/socks5/socks5.txt
update_interval_minutes = 10
default_protocol = socks5
